<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>NXT-MazeSolver: src/maze.nxc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NXT-MazeSolver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">src/maze.nxc File Reference</div>  </div>
</div>
<div class="contents">

<p>Solves a simple maze using the right/left hand algorithm.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="lib_n_x_c_8h_source.html">libNXC.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="robot_8h_source.html">robot.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="world_8h_source.html">world.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6718c5735119645de83e86ad9c7cbbaa"></a><!-- doxytag: member="maze.nxc::STATE_NDEF" ref="a6718c5735119645de83e86ad9c7cbbaa" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#a6718c5735119645de83e86ad9c7cbbaa">STATE_NDEF</a>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">undefined, needs to find a defined surface <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a61604d63371454b929a125bb2b1c0cbb"></a><!-- doxytag: member="maze.nxc::STATE_LINE" ref="a61604d63371454b929a125bb2b1c0cbb" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#a61604d63371454b929a125bb2b1c0cbb">STATE_LINE</a>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">following a line <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a274300c5c2f774ccddbc87eedeb4062d"></a><!-- doxytag: member="maze.nxc::STATE_JUNC" ref="a274300c5c2f774ccddbc87eedeb4062d" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#a274300c5c2f774ccddbc87eedeb4062d">STATE_JUNC</a>&#160;&#160;&#160;0x03</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">hit a junction <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab632c059efe7d1d9e33320c6fbbeb264"></a><!-- doxytag: member="maze.nxc::STATE_LOOK" ref="ab632c059efe7d1d9e33320c6fbbeb264" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#ab632c059efe7d1d9e33320c6fbbeb264">STATE_LOOK</a>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">look for a new way at a junction <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a90ce2d5555aba30036a29949841666a2"></a><!-- doxytag: member="maze.nxc::STATE_EXIT" ref="a90ce2d5555aba30036a29949841666a2" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#a90ce2d5555aba30036a29949841666a2">STATE_EXIT</a>&#160;&#160;&#160;0x05</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">exitting the maze <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4c28f483c309a2186fa335ac9dde38bd"></a><!-- doxytag: member="maze.nxc::STATE_FINISH" ref="a4c28f483c309a2186fa335ac9dde38bd" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#a4c28f483c309a2186fa335ac9dde38bd">STATE_FINISH</a>&#160;&#160;&#160;0x06</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">all done, shutting down <br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#ab0d45532f22ebbd2c93fbe0ace089a17">ndef</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for a defined surface.  <a href="#ab0d45532f22ebbd2c93fbe0ace089a17"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#a47be94a99c598e493b92e479a81027b3">line</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Follow the line.  <a href="#a47be94a99c598e493b92e479a81027b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#a7ea9b1b9672297eb09bd0f58203b7b61">junc</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Position the axis above a junction.  <a href="#a7ea9b1b9672297eb09bd0f58203b7b61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#ac8127d0497fc91995530fde1592fe5a9">look</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Look for the next way.  <a href="#ac8127d0497fc91995530fde1592fe5a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#a304e657dfa841cdf39ea9e138e23778e">exit_maze</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit the maze.  <a href="#a304e657dfa841cdf39ea9e138e23778e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#abb906e41c7ea91a320562a824ebc9905">main</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The state machine.  <a href="#abb906e41c7ea91a320562a824ebc9905"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89f234133d3efe315836311cbf21c64b"></a><!-- doxytag: member="maze.nxc::state" ref="a89f234133d3efe315836311cbf21c64b" args="" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maze_8nxc.html#a89f234133d3efe315836311cbf21c64b">state</a> = STATE_NDEF</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the current state the robot is in <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Solves a simple maze using the right/left hand algorithm. </p>
<p>This is an implementation of the right hand maze solving algorithm. This file implements the state machine and state functions. Definitions of the world (maze) and robot are outsourced to corresponding header files.</p>
<p>The state machine provides the following states:</p>
<ul>
<li>LINE: follow the line</li>
<li>JUNC: when hitting a junction, position the axis above it</li>
<li>LOOK: look right for a new way at the junction</li>
<li>EXIT: when the exit is found, leave the maze</li>
<li>NDEF: no defined surface is observed, search one</li>
<li>FINISH: maze left, shutdown</li>
</ul>
<dl class="author"><dt><b>Author:</b></dt><dd>thomas.zink </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>20110517</dd></dl>
<p>Changelog (only major events):</p>
<ul>
<li>20110517 thomas.zink<ul>
<li>corrections on documentation</li>
<li>created doc files</li>
<li>moved all remaining debugging functions to <a class="el" href="debug_8h.html" title="Debug Functions and Tasks.">debug.h</a> (could move the audio output to another state machine in debug, however, would make things messy)</li>
</ul>
</li>
<li>20101123 thomas.zink<ul>
<li>renamed My{World,Robot}.h</li>
<li>moved debugging funs / tasks to <a class="el" href="debug_8h.html" title="Debug Functions and Tasks.">debug.h</a></li>
<li>changed comments to doxygen style comments</li>
</ul>
</li>
<li>20100114 thomas.zink<ul>
<li>refactoring</li>
<li>using libNXC and libNBC</li>
<li>adjusted for new mazes</li>
</ul>
</li>
<li>20090922 thomas.zink<ul>
<li>initial version </li>
</ul>
</li>
</ul>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a304e657dfa841cdf39ea9e138e23778e"></a><!-- doxytag: member="maze.nxc::exit_maze" ref="a304e657dfa841cdf39ea9e138e23778e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void exit_maze </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Exit the maze. </p>
<p>When the exit is found, just run forward until the surface changes. </p>

</div>
</div>
<a class="anchor" id="a7ea9b1b9672297eb09bd0f58203b7b61"></a><!-- doxytag: member="maze.nxc::junc" ref="a7ea9b1b9672297eb09bd0f58203b7b61" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void junc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Position the axis above a junction. </p>
<p>Pass over the junction such that the axis is positioned directly above the middle of the junction. This allows turning on the spot and looking for the next way. </p>

</div>
</div>
<a class="anchor" id="a47be94a99c598e493b92e479a81027b3"></a><!-- doxytag: member="maze.nxc::line" ref="a47be94a99c598e493b92e479a81027b3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void line </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Follow the line. </p>
<p>Follows the line. Just drive forward until the surface changes. Then change state accordingly. </p>

</div>
</div>
<a class="anchor" id="ac8127d0497fc91995530fde1592fe5a9"></a><!-- doxytag: member="maze.nxc::look" ref="ac8127d0497fc91995530fde1592fe5a9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void look </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Look for the next way. </p>
<p>At a junction look for the next line to take. The algorithm favors the rightmost way. The robot first turns to the right and then turns to the left until it hits a line. This one will be the rightmost possible way. </p>

</div>
</div>
<a class="anchor" id="abb906e41c7ea91a320562a824ebc9905"></a><!-- doxytag: member="maze.nxc::main" ref="abb906e41c7ea91a320562a824ebc9905" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">task main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The state machine. </p>
<p>Implements the state machine. Start all background tasks and initializes the robot. Sets the initial state according to surface. Runs the state machine until finished. Then it shuts down. </p>

</div>
</div>
<a class="anchor" id="ab0d45532f22ebbd2c93fbe0ace089a17"></a><!-- doxytag: member="maze.nxc::ndef" ref="ab0d45532f22ebbd2c93fbe0ace089a17" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ndef </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Search for a defined surface. </p>
<p>While the surface is undefined this function searches a defined surface. The robot first look right for a number of rotations. Then left with an increased number of rotations. This pattern continues until the surface is defined again. The state is then changed accordingly. </p>

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue May 17 2011 10:57:21 for NXT-MazeSolver by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
